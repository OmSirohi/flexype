<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ† flexype</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="PostPurchaseDashboard.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
    </style>
</head>

<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const PostPurchaseDashboard = () => {
          const [order] = useState({
            id: 'ORD-2024-001',
            status: 'confirmed',
            items: [
              { name: 'Wireless Headphones', price: 199, category: 'electronics', image: 'ğŸ§' },
              { name: 'Phone Case', price: 29, category: 'accessories', image: 'ğŸ“±' }
            ],
            total: 228,
            estimatedDelivery: '2024-01-15',
            customerTier: 'gold'
          });

          const [showUpsell, setShowUpsell] = useState(false);
          const [timeOnPage, setTimeOnPage] = useState(0);
          const [aiInsights, setAiInsights] = useState('');
          const [rewardPoints, setRewardPoints] = useState(2280);
          const [showRewards, setShowRewards] = useState(false);
          const [trackingStage, setTrackingStage] = useState(1);
          const [showAR, setShowAR] = useState(false);
          const [sentiment, setSentiment] = useState('excited');
          const [personalizedOffers, setPersonalizedOffers] = useState([]);
          const [showChatbot, setShowChatbot] = useState(false);
          const [notifications, setNotifications] = useState([]);
          const canvasRef = useRef(null);

          useEffect(() => {
            const timer = setInterval(() => setTimeOnPage(prev => prev + 1), 1000);
            return () => clearInterval(timer);
          }, []);

          // AI-powered personalization
          useEffect(() => {
            if (timeOnPage === 3) {
              setAiInsights('Based on your purchase history, you love premium audio gear!');
              generatePersonalizedOffers();
            }
            if (timeOnPage === 6) setShowRewards(true);
            if (timeOnPage === 8) setShowUpsell(true);
            if (timeOnPage === 12) {
              setNotifications(prev => [...prev, 'Your order is being prepared! ğŸ“¦']);
            }
          }, [timeOnPage]);

          // Simulate real-time tracking updates
          useEffect(() => {
            const trackingTimer = setInterval(() => {
              setTrackingStage(prev => prev < 5 ? prev + 1 : prev);
            }, 15000);
            return () => clearInterval(trackingTimer);
          }, []);

          const generatePersonalizedOffers = () => {
            const aiOffers = [
              {
                type: 'ai-recommended',
                title: 'ğŸ¤– AI Pick: Premium Subscription',
                description: 'Based on your audio preferences, unlock exclusive tracks',
                confidence: 94,
                price: 9.99,
                savings: 50
              },
              {
                type: 'social-proof',
                title: 'ğŸ”¥ Trending: Wireless Charger',
                description: '2,847 customers bought this with headphones today',
                price: 39,
                originalPrice: 59,
                urgency: '3 left in stock'
              }
            ];
            setPersonalizedOffers(aiOffers);
          };

          const getTrackingStages = () => [
            { stage: 1, title: 'Order Confirmed', icon: 'âœ…', active: trackingStage >= 1 },
            { stage: 2, title: 'Preparing', icon: 'ğŸ“¦', active: trackingStage >= 2 },
            { stage: 3, title: 'Shipped', icon: 'ğŸšš', active: trackingStage >= 3 },
            { stage: 4, title: 'Out for Delivery', icon: 'ğŸƒ', active: trackingStage >= 4 },
            { stage: 5, title: 'Delivered', icon: 'ğŸ‰', active: trackingStage >= 5 }
          ];

          const drawConfetti = () => {
            const canvas = canvasRef.current;
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const confetti = [];
            for (let i = 0; i < 50; i++) {
              confetti.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                vx: Math.random() * 4 - 2,
                vy: Math.random() * 3 + 2,
                color: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'][Math.floor(Math.random() * 5)]
              });
            }
            
            const animate = () => {
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              confetti.forEach(p => {
                ctx.fillStyle = p.color;
                ctx.fillRect(p.x, p.y, 8, 8);
                p.x += p.vx;
                p.y += p.vy;
              });
              if (confetti[0].y < canvas.height) requestAnimationFrame(animate);
            };
            animate();
          };

          useEffect(() => {
            drawConfetti();
          }, []);

          return (
            <div className="dashboard">
              <canvas ref={canvasRef} className="confetti-canvas" />
              
              {/* Floating Notifications */}
              <div className="notifications">
                {notifications.map((notif, idx) => (
                  <div key={idx} className="notification slide-in">{notif}</div>
                ))}
              </div>

              {/* AI Chatbot */}
              {showChatbot && (
                <div className="chatbot">
                  <div className="chatbot-header">
                    <span>ğŸ¤– AI Assistant</span>
                    <button onClick={() => setShowChatbot(false)}>Ã—</button>
                  </div>
                  <div className="chatbot-body">
                    <div className="message ai">Hi! I'm here to help optimize your post-purchase experience. Any questions?</div>
                    <input placeholder="Ask me anything..." className="chat-input" />
                  </div>
                </div>
              )}

              <div className="order-section">
                <div className="success-header">
                  <div className="checkmark animate-bounce">âœ“</div>
                  <h1 className="gradient-text">Order Confirmed!</h1>
                  <p>Thank you for your purchase. We're preparing your order now.</p>
                  {aiInsights && (
                    <div className="ai-insight">
                      <span className="ai-badge">ğŸ¤– AI Insight</span>
                      {aiInsights}
                    </div>
                  )}
                </div>

                <div className="order-details">
                  <div className="order-info">
                    <h3>Order #{order.id}</h3>
                    <div className={`status-badge ${order.customerTier}`}>
                      {order.customerTier} member â€¢ {order.status}
                    </div>
                  </div>
                  
                  <div className="items-list">
                    {order.items.map((item, idx) => (
                      <div key={idx} className="item enhanced">
                        <div className="item-details">
                          <span className="item-icon">{item.image}</span>
                          <div>
                            <div className="item-name">{item.name}</div>
                            <button 
                              className="ar-preview"
                              onClick={() => setShowAR(true)}
                            >
                              ğŸ“± AR Preview
                            </button>
                          </div>
                        </div>
                        <span className="item-price">${item.price}</span>
                      </div>
                    ))}
                    <div className="total">
                      <strong>Total: ${order.total}</strong>
                      <div className="rewards-earned">
                        +{Math.floor(order.total * 10)} points earned! ğŸ¯
                      </div>
                    </div>
                  </div>

                  {/* Real-time Tracking */}
                  <div className="tracking-section">
                    <h4>Live Tracking</h4>
                    <div className="tracking-progress">
                      {getTrackingStages().map((stage, idx) => (
                        <div key={idx} className={`tracking-stage ${stage.active ? 'active' : ''}`}>
                          <div className="stage-icon">{stage.icon}</div>
                          <div className="stage-title">{stage.title}</div>
                        </div>
                      ))}
                    </div>
                    <div className="delivery-info">
                      <h4>ğŸ“… Estimated Delivery: {order.estimatedDelivery}</h4>
                    </div>
                  </div>
                </div>
              </div>

              {/* Revolutionary Interactive Features */}
              <div className="interactive-features">
                <button className="action-btn primary pulse" onClick={() => {
                  setNotifications(prev => [...prev, 'ğŸš€ Live tracking activated!']);
                }}>
                  ğŸ“ Live Track with AI
                </button>
                <button className="action-btn" onClick={() => setShowRewards(true)}>
                  ğŸ Rewards ({rewardPoints})
                </button>
                <button className="action-btn" onClick={() => setShowChatbot(true)}>
                  ğŸ¤– AI Assistant
                </button>
                <button className="action-btn" onClick={() => {
                  setNotifications(prev => [...prev, 'ğŸ“„ Receipt sent to email!']);
                }}>
                  ğŸ“„ Smart Receipt
                </button>
                <button className="action-btn" onClick={() => {
                  navigator.share && navigator.share({
                    title: 'Check out my purchase!',
                    text: 'Just bought amazing products with AI recommendations!'
                  });
                }}>
                  ğŸ“± Share Purchase
                </button>
              </div>

              {/* Voice Command Feature */}
              <div className="voice-command">
                <button className="voice-btn" onClick={() => {
                  if ('webkitSpeechRecognition' in window) {
                    const recognition = new webkitSpeechRecognition();
                    recognition.onresult = (event) => {
                      const command = event.results[0][0].transcript.toLowerCase();
                      if (command.includes('track')) {
                        setNotifications(prev => [...prev, 'ğŸ¤ Voice: Tracking your order...']);
                      } else if (command.includes('rewards')) {
                        setShowRewards(true);
                      }
                    };
                    recognition.start();
                  }
                }}>
                  ğŸ¤ Voice Commands
                </button>
              </div>

              {/* Gamified Rewards */}
              {showRewards && (
                <div className="rewards-section">
                  <div className="rewards-header">
                    <h3>ğŸ¯ Your Rewards Dashboard</h3>
                    <button onClick={() => setShowRewards(false)}>Ã—</button>
                  </div>
                  <div className="rewards-content">
                    <div className="points-display">
                      <div className="points-circle animate-bounce">
                        <span className="points-number">{rewardPoints}</span>
                        <span className="points-label">Points</span>
                      </div>
                    </div>
                    <div className="achievements">
                      <h4>ğŸ† Achievements Unlocked</h4>
                      <div className="achievement-grid">
                        <div className="achievement unlocked">
                          <span>ğŸ›ï¸</span>
                          <div>First Purchase</div>
                        </div>
                        <div className="achievement unlocked">
                          <span>â­</span>
                          <div>Gold Member</div>
                        </div>
                        <div className="achievement locked">
                          <span>ğŸ”¥</span>
                          <div>Streak Master</div>
                        </div>
                      </div>
                    </div>
                    <div className="rewards-grid">
                      <div className="reward-item available pulse">
                        <span>â˜•</span>
                        <div>$5 Coffee<br/><small>1000 pts</small></div>
                        <button className="redeem-btn" onClick={() => {
                          setRewardPoints(prev => prev - 1000);
                          setNotifications(prev => [...prev, 'â˜• Coffee reward redeemed!']);
                        }}>Redeem Now</button>
                      </div>
                      <div className="reward-item">
                        <span>ğŸšš</span>
                        <div>Free Shipping<br/><small>500 pts</small></div>
                        <button className="redeem-btn" onClick={() => {
                          setRewardPoints(prev => prev - 500);
                          setNotifications(prev => [...prev, 'ğŸšš Free shipping activated!']);
                        }}>Redeem</button>
                      </div>
                      <div className="reward-item">
                        <span>ğŸ§</span>
                        <div>Premium Headphones<br/><small>5000 pts</small></div>
                        <button className="redeem-btn disabled">Need More Points</button>
                      </div>
                    </div>
                    <div className="spin-wheel">
                      <button className="spin-btn" onClick={() => {
                        const prizes = [100, 200, 500, 1000];
                        const prize = prizes[Math.floor(Math.random() * prizes.length)];
                        setRewardPoints(prev => prev + prize);
                        setNotifications(prev => [...prev, `ğŸ° Spin won ${prize} points!`]);
                      }}>ğŸ° Lucky Spin (100 pts)</button>
                    </div>
                  </div>
                </div>
              )}

              {/* AR Preview Modal */}
              {showAR && (
                <div className="ar-modal">
                  <div className="ar-content">
                    <h3>ğŸ“± AR Product Preview</h3>
                    <div className="ar-viewer">
                      <div className="ar-placeholder animate-bounce">
                        ğŸ§ <br/>
                        <span>Point your camera to see your headphones in 3D!</span>
                        <div className="ar-controls">
                          <button onClick={() => {
                            setNotifications(prev => [...prev, 'ğŸ“¸ AR photo saved!']);
                          }}>ğŸ“¸ Take Photo</button>
                          <button onClick={() => {
                            setNotifications(prev => [...prev, 'ğŸ“± Shared to social!']);
                          }}>ğŸ“± Share AR</button>
                        </div>
                      </div>
                    </div>
                    <button onClick={() => setShowAR(false)}>Close AR</button>
                  </div>
                </div>
              )}

              {/* AI-Powered Upsells */}
              {showUpsell && (
                <div className="monetization-section">
                  <h3>ğŸš€ AI-Curated Just for You</h3>
                  <div className="ai-confidence">
                    <div className="confidence-meter">
                      <div className="confidence-bar" style={{width: '94%'}}></div>
                      <span>94% AI Confidence Match</span>
                    </div>
                  </div>
                  <div className="offers-grid">
                    {personalizedOffers.map((offer, idx) => (
                      <div key={idx} className={`offer-card ${offer.type} interactive`}>
                        <div className="offer-header">
                          <h4>{offer.title}</h4>
                          {offer.confidence && (
                            <div className="confidence-badge pulse">{offer.confidence}% match</div>
                          )}
                          {offer.urgency && <span className="urgency pulse">{offer.urgency}</span>}
                        </div>
                        
                        <p>{offer.description}</p>
                        
                        <div className="offer-value">
                          <div className="price">
                            ${offer.price}
                            {offer.originalPrice && (
                              <span className="original-price">${offer.originalPrice}</span>
                            )}
                            {offer.savings && (
                              <span className="savings">Save {offer.savings}%!</span>
                            )}
                          </div>
                        </div>
                        
                        <div className="offer-actions">
                          <button className="add-btn glow" onClick={() => {
                            setRewardPoints(prev => prev + 200);
                            setNotifications(prev => [...prev, 'ğŸ‰ Added! +200 bonus points!']);
                            drawConfetti();
                          }}>ğŸ›’ Add to Cart</button>
                          <button className="learn-more">ğŸ” Learn More</button>
                        </div>
                        
                        <div className="social-proof">
                          <div className="live-stats">
                            <span className="live-counter pulse">ğŸ”´ {Math.floor(Math.random() * 100) + 20} viewing</span>
                            <span className="purchase-count">âœ… {Math.floor(Math.random() * 1000) + 500} bought today</span>
                          </div>
                        </div>
                      </div>
                    ))}
                    
                    {/* Dynamic AI Offer */}
                    <div className="offer-card ai-generated">
                      <div className="offer-header">
                        <h4>ğŸ¤– AI Generated Offer</h4>
                        <div className="live-counter pulse">ğŸ”´ Live AI Analysis</div>
                      </div>
                      <p>Based on your behavior: Extended Warranty Package</p>
                      <div className="ai-reasoning">
                        <small>ğŸ’¡ AI detected you value quality & protection</small>
                      </div>
                      <div className="offer-actions">
                        <button className="add-btn" onClick={() => {
                          setNotifications(prev => [...prev, 'ğŸ¤– AI offer accepted!']);
                        }}>Accept AI Suggestion</button>
                      </div>
                    </div>
                  </div>
                  
                  <button 
                    className="dismiss-offers"
                    onClick={() => setShowUpsell(false)}
                  >
                    âœ¨ I'm satisfied with my purchase
                  </button>
                </div>
              )}

              {/* Trust & Security */}
              <div className="trust-section">
                <div className="guarantee">
                  <span>ğŸ›¡ï¸</span>
                  <div>
                    <strong>AI-Powered Protection</strong>
                    <p>30-day return + fraud detection</p>
                  </div>
                </div>
                
                <div className="support">
                  <span>ğŸ’¬</span>
                  <div>
                    <strong>24/7 AI Support</strong>
                    <p>Instant help with 99.9% accuracy</p>
                  </div>
                </div>
                
                <div className="sustainability">
                  <span>ğŸŒ±</span>
                  <div>
                    <strong>Carbon Neutral+</strong>
                    <p>Your order plants 3 trees via AI optimization</p>
                  </div>
                </div>
              </div>

              {/* Interactive Sentiment */}
              <div className="sentiment-section">
                <h4>ğŸ¯ How's your experience?</h4>
                <div className="sentiment-buttons">
                  {['ğŸ˜', 'ğŸ˜Š', 'ğŸ˜', 'ğŸ˜•'].map((emoji, idx) => (
                    <button 
                      key={idx} 
                      className={`sentiment-btn ${sentiment === ['excited', 'happy', 'neutral', 'concerned'][idx] ? 'active' : ''}`}
                      onClick={() => {
                        setSentiment(['excited', 'happy', 'neutral', 'concerned'][idx]);
                        if (idx === 0) {
                          setRewardPoints(prev => prev + 50);
                          setNotifications(prev => [...prev, 'ğŸ‰ +50 points for great feedback!']);
                        }
                      }}
                    >
                      {emoji}
                    </button>
                  ))}
                </div>
                {sentiment === 'excited' && (
                  <div className="sentiment-response animate-bounce">
                    ğŸ‰ Amazing! Share your joy and earn 100 more points!
                    <button className="share-joy" onClick={() => {
                      setRewardPoints(prev => prev + 100);
                      setNotifications(prev => [...prev, 'ğŸ“± Shared! +100 bonus points!']);
                    }}>ğŸ“± Share Joy</button>
                  </div>
                )}
              </div>

              {/* Live Social Proof */}
              <div className="social-proof-section">
                <h4>ğŸŒŸ Live Community Activity</h4>
                <div className="live-feed">
                  <div className="activity-item">
                    <span>ğŸ‘¤ Sarah just bought the same headphones</span>
                    <span className="timestamp">2 min ago</span>
                  </div>
                  <div className="activity-item">
                    <span>â­ Mike rated his purchase 5 stars</span>
                    <span className="timestamp">5 min ago</span>
                  </div>
                  <div className="activity-item">
                    <span>ğŸ Emma redeemed coffee reward</span>
                    <span className="timestamp">8 min ago</span>
                  </div>
                </div>
              </div>
            </div>
          );
        };

        ReactDOM.render(<PostPurchaseDashboard />, document.getElementById('root'));
    </script>
</body>
</html>
